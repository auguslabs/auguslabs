---
/**
 * Página de Contacto
 * Formulario simple y minimalista con opción de contacto rápido
 */

import BaseLayout from '@/layouts/BaseLayout.astro';
import { services } from '@/data/mock/services';
import { ContactQuickButton } from '@/components/ContactQuickButton';

---

<BaseLayout title="Contact - Auguslabs">
  <section class="w-full py-12 md:py-16 bg-white">
    <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Header -->
      <div class="text-center mb-12">
        <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4" style="color: #07549b;">
          Contact
        </h1>
        <p class="text-lg text-gray-700">
          Let's work together
        </p>
      </div>

      <!-- Opción de Contacto Rápido -->
      <div class="mb-8 p-6 border-2 border-dashed rounded-xl" style="border-color: #07549b;">
        <div class="text-center">
          <p class="text-gray-700 mb-4">
            <strong>Prefer to be contacted?</strong> Leave your email and we'll reach out to you.
          </p>
          <ContactQuickButton client:load />
        </div>
      </div>

      <!-- Divider -->
      <div class="relative mb-8">
        <div class="absolute inset-0 flex items-center">
          <div class="w-full border-t border-gray-300"></div>
        </div>
        <div class="relative flex justify-center text-sm">
          <span class="px-4 bg-white text-gray-500">Or fill out the form below</span>
        </div>
      </div>

      <!-- Formulario de contacto -->
      <form class="space-y-6" id="contact-form">
        <div>
          <label for="name" class="block text-sm font-medium text-gray-700 mb-2">
            Name
          </label>
          <input
            type="text"
            id="name"
            name="name"
            required
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all"
            style="color: #07549b;"
            placeholder="Your name"
          />
        </div>

        <div>
          <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
            Email
          </label>
          <input
            type="email"
            id="email"
            name="email"
            required
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all"
            style="color: #07549b;"
            placeholder="your.email@example.com"
          />
        </div>

        <div>
          <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">
            Phone <span class="text-gray-400 text-sm">(optional)</span>
          </label>
          <input
            type="tel"
            id="phone"
            name="phone"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all"
            style="color: #07549b;"
            placeholder="+1 (555) 123-4567"
          />
        </div>

        <div>
          <label for="service" class="block text-sm font-medium text-gray-700 mb-2">
            Service
          </label>
          <select
            id="service"
            name="service"
            required
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all bg-white"
            style="color: #07549b;"
          >
            <option value="">Select a service...</option>
            {services.map((service) => (
              <option value={service.id}>{service.name}</option>
            ))}
            <option value="other">Other</option>
          </select>
        </div>

        <div id="other-service-container" class="hidden">
          <label for="other-service" class="block text-sm font-medium text-gray-700 mb-2">
            Please specify <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            id="other-service"
            name="other-service"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all"
            style="color: #07549b;"
            placeholder="Describe the service you need..."
          />
        </div>

        <div>
          <label for="message" class="block text-sm font-medium text-gray-700 mb-2">
            What would you like to work on?
          </label>
          <textarea
            id="message"
            name="message"
            rows="5"
            required
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none transition-all resize-none"
            style="color: #07549b;"
            placeholder="Tell us about your project..."
          ></textarea>
        </div>

        <button
          type="submit"
          class="w-full bg-secondary-500 hover:bg-secondary-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors"
        >
          Send Message
        </button>
      </form>
    </div>
  </section>

  <script is:inline>
    // Manejo del campo "Other" service
    const serviceSelect = document.getElementById('service');
    const otherServiceContainer = document.getElementById('other-service-container');
    const otherServiceInput = document.getElementById('other-service');

    serviceSelect?.addEventListener('change', (e) => {
      const target = e.target;
      if (!target) return;
      
      const selectedValue = target.value;
      
      if (selectedValue === 'other') {
        otherServiceContainer?.classList.remove('hidden');
        otherServiceInput?.setAttribute('required', 'required');
      } else {
        otherServiceContainer?.classList.add('hidden');
        otherServiceInput?.removeAttribute('required');
        if (otherServiceInput) {
          otherServiceInput.value = '';
        }
      }
    });

    // Manejo básico del formulario
    document.getElementById('contact-form')?.addEventListener('submit', (e) => {
      e.preventDefault();
      
      // Validar que si "Other" está seleccionado, el campo esté lleno
      const selectedService = serviceSelect?.value;
      if (selectedService === 'other') {
        const otherValue = otherServiceInput?.value.trim();
        if (!otherValue) {
          alert('Please specify the service you need.');
          otherServiceInput?.focus();
          return;
        }
      }
      
      // Aquí puedes agregar la lógica para enviar el formulario
      alert('Thank you for your message! We will get back to you soon.');
      const form = e.target;
      if (form) {
        form.reset();
      }
      
      // Resetear el campo "Other" al limpiar el formulario
      otherServiceContainer?.classList.add('hidden');
      otherServiceInput?.removeAttribute('required');
    });
  </script>
</BaseLayout>

